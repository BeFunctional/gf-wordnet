<!DOCTYPE html>
<html style="height: 100%">
	<head>
		<title>GF WordNet</title>
		<link rel="stylesheet" type="text/css" href="gf-wordnet.css">
	</head>

	<body style="height: 100%">
		<table><tr>
			<td>
				<table id="from" class="multiselect">
					<thead>
						<tr onclick="showCheckboxes(this.parentNode.parentNode)"><th>English</th><th><img src="triangle.png"></th></tr>
					</thead>
					<tbody>
						<tr><td onclick="changeItem(event,this)">Bulgarian</td><td><input type="checkbox" name="ParseBul" checked="true"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Catalan</td><td><input type="checkbox" name="ParseCat"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Chinese</td><td><input type="checkbox" name="ParseChi"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Dutch</td><td><input type="checkbox" name="ParseDut"/></td></tr>
						<tr><td onclick="changeItem(event,this)">English</td><td><input type="checkbox" name="ParseEng" checked="true"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Estonian</td><td><input type="checkbox" name="ParseEst"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Finnish</td><td><input type="checkbox" name="ParseFin"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Italian</td><td><input type="checkbox" name="ParseIta"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Portuguese</td><td><input type="checkbox" name="ParsePor"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Slovenian</td><td><input type="checkbox" name="ParseSlv"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Spanish</td><td><input type="checkbox" name="ParseSpa"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Swedish</td><td><input type="checkbox" name="ParseSwe" checked="true"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Thai</td><td><input type="checkbox" name="ParseTha"/></td></tr>
						<tr><td onclick="changeItem(event,this)">Turkish</td><td><input type="checkbox" name="ParseTur"/></td></tr>
					</tbody>
				</table>
			</td>
			<td><input id="search" type="text"></td>
			<td><input id="button" type="button" value="Search" onclick="gfwordnet.search(getMultiSelection(element('from')), element('search').value, element('result')); element('search').value = ''"></td>
		</tr></table>

		<br>

		<div style="min-height: 85%">
			<table class="result" id="result">
				<thead></thead>
				<tbody></tbody>
				<tfoot></tfoot>
			</table>
		</div>

		<br>

		<p>
			<a href="gf-wordnet-help.html" target="_blank">What is this?</a>
			<a id="logIn" href="https://github.com/login/oauth/authorize?scope=user:email&client_id=1e94c97e812a9f502068">Log In</a>
		</p>

		<script src="https://cloud.grammaticalframework.org/js/support.js"></script>
		<script src="js/tsnejs.js"></script>
		<script src="js/gfwordnet.js"></script>
		<script src="js/wordcloud2.js"></script>
		<script src="js/multiselect.js"></script>
		<script>
			gfwordnet.initialize()

			element("search").addEventListener("keyup", function(event) {
				event.preventDefault();
				if (event.keyCode === 13) {
					element("button").click();
				}
			});
			
			function getCookie(cname) {
			  var name = cname + "=";
			  var ca = document.cookie.split(';');
			  for(var i = 0; i < ca.length; i++) {
			    var c = ca[i];
			    while (c.charAt(0) == ' ') {
			      c = c.substring(1);
			    }
			    if (c.indexOf(name) == 0) {
			      return decodeURIComponent(c.substring(name.length, c.length));
			    }
			  }
			  return null;
			}

			function deleteCookie(name) {
			  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
			}

			var user = getCookie("user");
			if (user != null) {
				var logIn = element('logIn');
				logIn.innerHTML = "Log Out "+user;
				logIn.onclick = function(event) {
					event.stopPropagation();
					gfwordnet.set_access_token(null,element('result'));
					logIn.innerHTML = "Log In";
					logIn.onclick = null;
					deleteCookie("user");
					deleteCookie("access_token");
					return false;
				};
			}
			var access_token = getCookie("access_token");
			gfwordnet.set_access_token(access_token,element('result'));
		</script>
	</body>
</html>
